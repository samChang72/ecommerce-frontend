<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ç£ç·šä¸Š9Ræ«»æ¡ƒ(1å…¬æ–¤)æ¯”åƒ¹ç¥å™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals (Background: #FDFBF6, Primary Text: #3C2A21, Accent: #E8A374, Chart-Primary: #D4A59A, Chart-Secondary: #A39171) -->
    <!-- Application Structure Plan: The application is designed as an interactive dashboard, diverging from the report's linear format. The structure prioritizes immediate user value and effortless exploration. It begins with "Top Picks" for quick answers, followed by the core "Interactive Comparison Tool" (stacked bar chart + sortable table) to allow deep data exploration. This is supplemented by "Smart Shopper Tips" to provide actionable advice derived from the report's qualitative sections. This task-oriented, dashboard structure was chosen because it directly addresses the user's primary goal: to quickly and easily find the best deal based on their own criteria (total price, speed, etc.), rather than reading a report sequentially. -->
    <!-- Visualization & Content Choices: 
        1.  Report Info: Overall price comparison. -> Goal: Compare total cost composition. -> Viz: Stacked Horizontal Bar Chart (Chart.js/Canvas). -> Interaction: Hover tooltips show price/shipping breakdown. -> Justification: Visually reinforces the report's key message that total cost is a sum of product price and shipping. Horizontal format is ideal for comparing categories.
        2.  Report Info: Full data table. -> Goal: Allow detailed comparison and sorting. -> Presentation: Interactive HTML Table. -> Interaction: Sort buttons (Total Price, Product Price, Shipping) re-order both the chart and the table. -> Justification: Empowers users to analyze data based on their personal priorities, making the data actionable.
        3.  Report Info: Recommendations & purchasing advice. -> Goal: Provide quick, scannable insights. -> Presentation: Styled "Top Picks" and "Tips" cards (HTML/Tailwind). -> Interaction: Static, for easy reading. -> Justification: Distills key qualitative findings into a highly digestible format, enhancing user decision-making.
        Library/Method: Chart.js for canvas-based charts, Vanilla JS for state management and DOM manipulation, Tailwind CSS for styling. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #FDFBF6;
            color: #3C2A21;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 500px;
            max-height: 70vh;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .tooltip-custom {
            background-color: rgba(60, 42, 33, 0.9);
            border-radius: 0.5rem;
            color: #FDFBF6;
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
        }
        .active-sort-btn {
            background-color: #3C2A21;
            color: #FDFBF6;
        }
        .inactive-sort-btn {
            background-color: #E8A374;
            color: #3C2A21;
        }
    </style>
</head>
<body class="antialiased">
    <div class="container mx-auto px-4 py-8 md:py-12">

        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-[#3C2A21] mb-2">å°ç£ç·šä¸Š9Ræ«»æ¡ƒ(1å…¬æ–¤)æ¯”åƒ¹ç¥å™¨</h1>
            <p class="text-md text-[#A39171]">æ ¹æ“šå…¬é–‹å¸‚å ´å ±å‘Šï¼Œç‚ºæ‚¨å³æ™‚åˆ†ææœ€ä½³è³¼è²·é¸æ“‡</p>
        </header>

        <main>
            <section id="recommendations" class="mb-12">
                <h2 class="text-2xl font-bold text-center mb-6">ï¿½ æœ¬é€±ç²¾é¸æ¨è–¦</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white/70 p-6 rounded-lg shadow-md border border-gray-200 text-center">
                        <div class="text-4xl mb-3">ğŸ¥‡</div>
                        <h3 class="font-bold text-xl mb-2">ç¸½åƒ¹æœ€å„ª</h3>
                        <p class="text-2xl font-bold text-[#D4A59A] mb-2">NT$ 650</p>
                        <p class="font-semibold">å®¶æ¨‚ç¦ç·šä¸Šè³¼ç‰©</p>
                        <p class="text-sm text-[#A39171]">(å•†å“ $550 + é‹è²» $100)</p>
                    </div>
                    <div class="bg-white/70 p-6 rounded-lg shadow-md border border-gray-200 text-center">
                        <div class="text-4xl mb-3">ğŸ¥ˆ</div>
                        <h3 class="font-bold text-xl mb-2">äººæ°£æ¬¡é¸</h3>
                        <p class="text-2xl font-bold text-[#D4A59A] mb-2">NT$ 709</p>
                        <p class="font-semibold">momoè³¼ç‰©ç¶² (ç”œéœ²éœ²)</p>
                        <p class="text-sm text-[#A39171]">(å•†å“ $589 + é‹è²» $120)</p>
                    </div>
                    <div class="bg-white/70 p-6 rounded-lg shadow-md border border-gray-200 text-center">
                        <div class="text-4xl mb-3">ğŸš€</div>
                        <h3 class="font-bold text-xl mb-2">æ€¥é€Ÿåˆ°è²¨</h3>
                        <p class="text-2xl font-bold text-[#D4A59A] mb-2">NT$ 799</p>
                        <p class="font-semibold">i3Freshæ„›ä¸Šæ–°é®®</p>
                        <p class="text-sm text-[#A39171]">(å•†å“ $799 + å…é‹è²»)</p>
                    </div>
                </div>
            </section>

            <section id="comparison-tool" class="mb-12 bg-white/50 p-4 sm:p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-bold text-center mb-2">äº’å‹•æ¯”åƒ¹åœ–è¡¨</h2>
                <p class="text-center text-[#A39171] mb-6">é»æ“ŠæŒ‰éˆ•æ’åºï¼Œå°‡æ»‘é¼ ç§»è‡³åœ–è¡¨ä¸ŠæŸ¥çœ‹è©³ç´°è³‡è¨Š</p>

                <div class="flex justify-center items-center space-x-2 sm:space-x-4 mb-6">
                    <button id="sortByTotalPrice" class="sort-btn text-sm sm:text-base font-semibold py-2 px-4 rounded-full shadow transition-transform transform hover:scale-105">ç¸½åƒ¹æ’åº</button>
                    <button id="sortByProductPrice" class="sort-btn text-sm sm:text-base font-semibold py-2 px-4 rounded-full shadow transition-transform transform hover:scale-105">å•†å“åƒ¹æ’åº</button>
                    <button id="sortByShipping" class="sort-btn text-sm sm:text-base font-semibold py-2 px-4 rounded-full shadow transition-transform transform hover:scale-105">é‹è²»æ’åº</button>
                </div>
                
                <div class="chart-container">
                    <canvas id="priceChart"></canvas>
                </div>
            </section>

            <section id="details-table" class="mb-12">
                 <h2 class="text-2xl font-bold text-center mb-6">è©³ç´°åƒ¹æ ¼æ¸…å–®</h2>
                <div class="overflow-x-auto bg-white/50 p-2 sm:p-4 rounded-xl shadow-lg">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50/50">
                            <tr>
                                <th class="px-4 py-3 text-left text-xs font-bold text-[#A39171] uppercase tracking-wider">å¹³å°</th>
                                <th class="px-4 py-3 text-left text-xs font-bold text-[#A39171] uppercase tracking-wider">å•†å“åƒ¹æ ¼</th>
                                <th class="px-4 py-3 text-left text-xs font-bold text-[#A39171] uppercase tracking-wider">é‹è²»</th>
                                <th class="px-4 py-3 text-left text-xs font-bold text-[#A39171] uppercase tracking-wider">ç¸½åƒ¹</th>
                                <th class="px-4 py-3 text-left text-xs font-bold text-[#A39171] uppercase tracking-wider hidden md:table-cell">å‚™è¨»</th>
                                <th class="px-4 py-3 text-left text-xs font-bold text-[#A39171] uppercase tracking-wider">ç‹€æ…‹</th>
                            </tr>
                        </thead>
                        <tbody id="priceTableBody" class="bg-white divide-y divide-gray-200">
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="tips">
                <h2 class="text-2xl font-bold text-center mb-6">ğŸ’¡ ç²¾æ˜è³¼ç‰©è²¼å£«</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-white/70 p-6 rounded-lg shadow-md border border-gray-200">
                        <h3 class="font-bold text-lg mb-2">ğŸ›’ å–„ç”¨ã€Œæ¹Šå–®ã€ç­–ç•¥</h3>
                        <p class="text-sm text-[#3C2A21]">è‹¥å–®è²·æ«»æ¡ƒæœªé”å…é‹é–€æª»ï¼Œå¯åŠ è³¼å…¶ä»–æ—¥å¸¸ç”¨å“ï¼Œä¸€æ¬¡è³¼è¶³çœä¸‹é‹è²»ï¼Œæœ‰æ•ˆé™ä½ç¸½æˆæœ¬ã€‚</p>
                    </div>
                    <div class="bg-white/70 p-6 rounded-lg shadow-md border border-gray-200">
                        <h3 class="font-bold text-lg mb-2">âš–ï¸ æ ¸å°ã€Œæ·¨é‡ã€èˆ‡è¦æ ¼</h3>
                        <p class="text-sm text-[#3C2A21]">è³¼è²·å‰å‹™å¿…ç¢ºèªå•†å“æ¨™ç¤ºç‚ºã€Œæ·¨é‡ã€æˆ–ã€Œå«ç›’é‡ã€ï¼Œä¸¦ç•™æ„é‡é‡å¯èƒ½æœ‰ Â±10% çš„åˆç†èª¤å·®ã€‚</p>
                    </div>
                    <div class="bg-white/70 p-6 rounded-lg shadow-md border border-gray-200">
                        <h3 class="font-bold text-lg mb-2">âœ”ï¸ ç¢ºèªã€Œåº«å­˜ã€èˆ‡é‹é€</h3>
                        <p class="text-sm text-[#3C2A21]">ç†±é–€å•†å“æ˜“å”®ç½„æˆ–ç‚ºã€Œåœ°å€é™å®šã€ã€‚ä¸‹å–®å‰è«‹ç¢ºèªåº«å­˜ç‹€æ…‹èˆ‡æ‚¨çš„æ”¶ä»¶åœ°å€æ˜¯å¦åœ¨é…é€ç¯„åœå…§ã€‚</p>
                    </div>
                    <div class="bg-white/70 p-6 rounded-lg shadow-md border border-gray-200">
                        <h3 class="font-bold text-lg mb-2">ğŸ“¦ é–‹ç®±ç«‹å³æª¢æŸ¥</h3>
                        <p class="text-sm text-[#3C2A21]">ç”Ÿé®®æ°´æœä¸é©ç”¨7å¤©é‘‘è³æœŸã€‚æ”¶åˆ°å¾Œè«‹ç«‹å³é–‹ç®±æª¢æŸ¥ï¼Œè‹¥æœ‰å•é¡Œè«‹é¦¬ä¸Šæ‹ç…§ä¸¦è¯ç¹«å®¢æœè™•ç†ã€‚</p>
                    </div>
                </div>
            </section>

        </main>

        <footer class="text-center mt-12 text-[#A39171] text-sm">
            <p>è³‡æ–™ä¾†æºç‚ºå…¬é–‹å¸‚å ´ç ”ç©¶å ±å‘Šï¼Œåƒ¹æ ¼èˆ‡åº«å­˜ç‹€æ³å¯èƒ½éš¨æ™‚è®Šå‹•ï¼Œè«‹ä»¥å„å¹³å°æœ€çµ‚çµå¸³é é¢ç‚ºæº–ã€‚</p>
            <p>æ­¤å·¥å…·åƒ…ä¾›åƒè€ƒï¼Œä¸æ§‹æˆä»»ä½•è³¼è²·å»ºè­°ã€‚</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const cherryData = [
                { platform: 'å®¶æ¨‚ç¦ç·šä¸Šè³¼ç‰©', product: 'Cherries (9Rç¦®ç›’)', price: 550, shipping: 100, note: 'è¨‚å–®<800å…ƒé‹è²»100å…ƒ', status: 'æœ‰è²¨', available: true },
                { platform: 'momoè³¼ç‰©ç¶²', product: 'ã€ç”œéœ²éœ²ã€‘è¯ç››é “9.5Ræ«»æ¡ƒ', price: 589, shipping: 120, note: 'è¨‚å–®<800å…ƒé‹è²»120å…ƒ', status: 'æœ‰è²¨', available: true },
                { platform: 'momoè³¼ç‰©ç¶²', product: 'ã€æ«»æ¡ƒå¥³ç‹ã€‘è¯ç››é “9.5Ræ‰‹æ‘˜æ«»æ¡ƒ', price: 615, shipping: 120, note: 'è¨‚å–®<800å…ƒé‹è²»120å…ƒ', status: 'æœ‰è²¨', available: true },
                { platform: 'momoè³¼ç‰©ç¶²', product: 'ã€RealShopã€‘ç©ºé‹è¯ç››é “9Ræ«»æ¡ƒ', price: 638, shipping: 120, note: 'è¨‚å–®<800å…ƒé‹è²»120å…ƒ', status: 'æœ‰è²¨', available: true },
                { platform: 'i3Freshæ„›ä¸Šæ–°é®®', product: 'ç¾åœ‹9ROWè¯ç››é “æ«»æ¡ƒ', price: 799, shipping: 0, note: '1ç›’å…é‹', status: 'æœ‰è²¨', available: true },
                { platform: 'Yahooè³¼ç‰©ä¸­å¿ƒ', product: 'æ„›èœœæœç¾åœ‹ç©ºé‹æ«»æ¡ƒç¦®ç›’9R', price: 750, shipping: null, note: 'é‹è²»æœªæ˜ç¢º', status: 'æœ‰è²¨', available: true },
                { platform: 'è¦çš®è³¼ç‰©', product: 'ç¾åœ‹è¯ç››é “ä¸€å…¬æ–¤ç©ºé‹æ«»æ¡ƒ9R', price: 850, shipping: null, note: 'é‹è²»æœªæ˜ç¢º', status: 'æœ‰è²¨', available: true },
                { platform: 'é®®ç›’å¸‚é›†', product: 'ç¾åœ‹æ«»æ¡ƒ9R(ç¦®ç›’1å…¬æ–¤è£)', price: 850, shipping: null, note: 'é‹è²»æœªæ˜ç¢º', status: 'æœ‰è²¨', available: true },
                { platform: 'æ±æ£®è³¼ç‰©ç¶²', product: 'åˆ‡æœå­£-ç¾åœ‹æ«»æ¡ƒ9R', price: 990, shipping: 80, note: 'å¿«å€‰è¶…å–<490å…ƒé‹è²»80å…ƒ', status: 'æœ‰è²¨', available: true },
                { platform: 'å°ç£å¥½è¾²', product: '9Rè¯ç››é “æ«»æ¡ƒ', price: 1199, shipping: 0, note: 'å…é‹è²»', status: 'æœ‰è²¨', available: true },
                { platform: 'è¦çš®è³¼ç‰©', product: 'æ¡ƒåœ’é™å®šè¯ç››é “æ«»æ¡ƒ9.5ROW', price: 600, shipping: 0, note: 'æ¡ƒåœ’å€/å¤§ç«¹å€ç›´é€', status: 'éŠ·å”®ä¸€ç©º', available: false },
            ].map(item => ({...item, total: item.price + (item.shipping ?? 0) }));

            let currentSort = 'total';
            let chartInstance = null;
            const ctx = document.getElementById('priceChart').getContext('2d');

            const sortButtons = {
                total: document.getElementById('sortByTotalPrice'),
                price: document.getElementById('sortByProductPrice'),
                shipping: document.getElementById('sortByShipping'),
            };

            function updateSortButtons() {
                Object.values(sortButtons).forEach(btn => {
                    btn.classList.remove('active-sort-btn', 'inactive-sort-btn');
                });
                sortButtons.total.classList.add(currentSort === 'total' ? 'active-sort-btn' : 'inactive-sort-btn');
                sortButtons.price.classList.add(currentSort === 'price' ? 'active-sort-btn' : 'inactive-sort-btn');
                sortButtons.shipping.classList.add(currentSort === 'shipping' ? 'active-sort-btn' : 'inactive-sort-btn');
            }

            function sortData() {
                cherryData.sort((a, b) => {
                    if (a.shipping === null) return 1;
                    if (b.shipping === null) return -1;
                    if (!a.available) return 1;
                    if (!b.available) return -1;
                    
                    if (currentSort === 'shipping') {
                         if ((b.shipping ?? Infinity) > (a.shipping ?? Infinity)) return -1;
                         if ((b.shipping ?? Infinity) < (a.shipping ?? Infinity)) return 1;
                    }
                    
                    return a[currentSort] - b[currentSort];
                });
            }

            function renderTable() {
                const tableBody = document.getElementById('priceTableBody');
                tableBody.innerHTML = '';
                cherryData.forEach(item => {
                    const row = document.createElement('tr');
                    const statusColor = item.available ? 'text-green-600' : 'text-red-600';
                    const shippingText = item.shipping === null ? '?' : `NT$ ${item.shipping}`;
                    row.innerHTML = `
                        <td class="px-4 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-[#3C2A21]">${item.platform}</div>
                            <div class="text-xs text-[#A39171]">${item.product}</div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap text-sm text-[#3C2A21]">NT$ ${item.price}</td>
                        <td class="px-4 py-4 whitespace-nowrap text-sm text-[#3C2A21]">${shippingText}</td>
                        <td class="px-4 py-4 whitespace-nowrap text-sm font-bold text-[#D4A59A]">NT$ ${item.total}</td>
                        <td class="px-4 py-4 whitespace-nowrap text-xs text-[#A39171] hidden md:table-cell">${item.note}</td>
                        <td class="px-4 py-4 whitespace-nowrap text-sm font-semibold ${statusColor}">${item.status}</td>
                    `;
                    tableBody.appendChild(row);
                });
            }

            function renderChart() {
                if (chartInstance) {
                    chartInstance.destroy();
                }
                
                const filteredData = cherryData.filter(d => d.available && d.shipping !== null);

                chartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: filteredData.map(d => `${d.platform} (${d.product.split('ã€‘')[1] || d.product})`),
                        datasets: [{
                            label: 'å•†å“åƒ¹æ ¼',
                            data: filteredData.map(d => d.price),
                            backgroundColor: '#D4A59A',
                            borderColor: '#C89387',
                            borderWidth: 1
                        }, {
                            label: 'é‹è²»',
                            data: filteredData.map(d => d.shipping),
                            backgroundColor: '#A39171',
                            borderColor: '#8E7E60',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                stacked: true,
                                title: {
                                    display: true,
                                    text: 'ç¸½åƒ¹æ ¼ (NT$)',
                                    font: { size: 14 }
                                }
                            },
                            y: {
                                stacked: true,
                                ticks: {
                                    autoSkip: false,
                                    font: { size: 10 }
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            tooltip: {
                                enabled: false,
                                external: function(context) {
                                    let tooltipEl = document.getElementById('chartjs-tooltip');
                                    if (!tooltipEl) {
                                        tooltipEl = document.createElement('div');
                                        tooltipEl.id = 'chartjs-tooltip';
                                        tooltipEl.className = 'tooltip-custom';
                                        document.body.appendChild(tooltipEl);
                                    }

                                    const tooltipModel = context.tooltip;
                                    if (tooltipModel.opacity === 0) {
                                        tooltipEl.style.opacity = 0;
                                        return;
                                    }

                                    if (tooltipModel.body) {
                                        const dataPoint = filteredData[tooltipModel.dataPoints[0].dataIndex];
                                        const title = tooltipModel.title[0] || '';
                                        let innerHtml = `<div class="font-bold mb-1">${title}</div>`;
                                        innerHtml += `<div>å•†å“: NT$ ${dataPoint.price}</div>`;
                                        innerHtml += `<div>é‹è²»: NT$ ${dataPoint.shipping}</div>`;
                                        innerHtml += `<div class="font-bold mt-1 border-t border-gray-400 pt-1">ç¸½åƒ¹: NT$ ${dataPoint.total}</div>`;
                                        tooltipEl.innerHTML = innerHtml;
                                    }

                                    const position = context.chart.canvas.getBoundingClientRect();
                                    tooltipEl.style.opacity = 1;
                                    tooltipEl.style.position = 'absolute';
                                    tooltipEl.style.left = position.left + window.pageXOffset + tooltipModel.caretX + 'px';
                                    tooltipEl.style.top = position.top + window.pageYOffset + tooltipModel.caretY + 'px';
                                    tooltipEl.style.pointerEvents = 'none';
                                }
                            }
                        }
                    }
                });
            }

            function updateUI() {
                sortData();
                renderTable();
                renderChart();
                updateSortButtons();
            }

            sortButtons.total.addEventListener('click', () => {
                currentSort = 'total';
                updateUI();
            });
            sortButtons.price.addEventListener('click', () => {
                currentSort = 'price';
                updateUI();
            });
            sortButtons.shipping.addEventListener('click', () => {
                currentSort = 'shipping';
                updateUI();
            });

            updateUI();
        });
    </script>
</body>
</html>
ï¿½